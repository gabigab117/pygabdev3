{% extends 'base.html' %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}

{% block content %}

<!-- Section principale -->
<div class="max-w-6xl mx-auto space-y-16">

  <!-- Introduction -->
  <div class="text-center max-w-3xl mx-auto">
    <h2 class="text-3xl font-bold text-gray-900 mb-6">
      Développeur Web & Formateur
    </h2>
    <p class="text-xl text-gray-600 leading-relaxed">
      Je crée des applications web modernes avec Django et Python, 
      et je partage mes connaissances à travers des articles et des formations.
    </p>
  </div>

  <!-- Articles et Projets -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    
    <!-- Dernière Publication -->
    <div class="space-y-6">
      <div class="flex items-center gap-4">
        <h3 class="text-2xl font-bold text-gray-900">Dernière Publication</h3>
        <div class="flex-1 h-px bg-gray-200"></div>
      </div>
      
      {% if last_article %}
      <div class="group cursor-pointer">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
          {% if last_article.main_image %}
          <div class="relative overflow-hidden">
            {% image last_article.main_image width-500 class='w-full h-56 object-cover transition-transform duration-300 group-hover:scale-105' alt=last_article.main_image.title %}
            <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          </div>
          {% endif %}
          
          <div class="p-6">
            <div class="flex items-center gap-3 text-sm text-gray-500 mb-3">
              <div class="flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                {{ last_article.date|date:"d M Y" }}
              </div>
              <span>•</span>
              <div class="flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                {{ last_article.owner }}
              </div>
            </div>
            
            <h4 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors">
              {{ last_article.title }}
            </h4>
            
            <div class="text-gray-600 mb-4 line-clamp-3">
              {{ last_article.header|richtext|striptags|truncatewords:25 }}
            </div>
            
            <a href="{% pageurl last_article %}" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-semibold group/link">
              Lire l'article
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform group-hover/link:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </a>
          </div>
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Dernier Projet -->
    <div class="space-y-6">
      <div class="flex items-center gap-4">
        <h3 class="text-2xl font-bold text-gray-900">Dernier Projet</h3>
        <div class="flex-1 h-px bg-gray-200"></div>
      </div>
      
      {% if project %}
      <div class="group cursor-pointer">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
          {% if project.main_image %}
          <div class="relative overflow-hidden">
            {% image project.main_image width-500 class='w-full h-56 object-cover transition-transform duration-300 group-hover:scale-105' alt=project.main_image.title %}
            <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          </div>
          {% endif %}
          
          <div class="p-6">
            <div class="flex items-center gap-3 text-sm text-gray-500 mb-3">
              <div class="flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                {{ project.date|date:"d M Y" }}
              </div>
              <span>•</span>
              <div class="flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                {{ project.owner }}
              </div>
            </div>
            
            <h4 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors">
              {{ project.title }}
            </h4>
            
            <div class="text-gray-600 mb-4 line-clamp-3">
              {{ project.header|richtext|striptags|truncatewords:25 }}
            </div>
            
            <a href="{% pageurl project %}" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-semibold group/link">
              Voir le projet
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform group-hover/link:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </a>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Séparateur élégant -->
  <div class="flex items-center justify-center">
    <div class="flex items-center gap-4">
      <div class="w-16 h-px bg-gray-300"></div>
      <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
      <div class="w-16 h-px bg-gray-300"></div>
    </div>
  </div>

  <!-- Navigation principale -->
  <div class="text-center">
    <h3 class="text-2xl font-bold text-gray-900 mb-8">Explorez mon travail</h3>
    <div class="flex flex-col sm:flex-row justify-center gap-6">
      <a href="{% slugurl 'blog' %}" class="group relative overflow-hidden bg-white border-2 border-gray-200 rounded-xl px-8 py-6 hover:border-blue-500 transition-all duration-300 hover:shadow-lg">
        <div class="flex items-center justify-center gap-3">
          <div class="p-3 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9.5a2 2 0 00-2-2h-2" />
            </svg>
          </div>
          <div class="text-left">
            <div class="font-bold text-gray-900 text-lg">Blog</div>
            <div class="text-gray-600 text-sm">Articles techniques</div>
          </div>
        </div>
      </a>
      
      <a href="{% slugurl 'projets' %}" class="group relative overflow-hidden bg-white border-2 border-gray-200 rounded-xl px-8 py-6 hover:border-blue-500 transition-all duration-300 hover:shadow-lg">
        <div class="flex items-center justify-center gap-3">
          <div class="p-3 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
            </svg>
          </div>
          <div class="text-left">
            <div class="font-bold text-gray-900 text-lg">Projets</div>
            <div class="text-gray-600 text-sm">Mes réalisations</div>
          </div>
        </div>
      </a>
    </div>
  </div>

  <!-- À propos - Version améliorée avec meilleur style pour le texte -->
  <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 md:p-12">
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-8">
        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </div>
        <h3 class="text-2xl font-bold text-gray-900 mb-6">À propos de moi</h3>
      </div>
      
      <!-- Contenu avec style prose amélioré -->
      <div class="prose prose-lg prose-gray max-w-none">
        <div class="prose-p:text-gray-700 prose-p:leading-relaxed prose-p:mb-6 prose-strong:text-gray-900 prose-strong:font-semibold prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline prose-ul:text-gray-700 prose-li:mb-2">
          {{ page.body|richtext }}
        </div>
      </div>
      
      <div class="text-center mt-8">
        <a href="{% slugurl 'contact' %}" class="inline-flex items-center gap-2 bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold text-lg shadow-md hover:shadow-lg">
          Me contacter
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
          </svg>
        </a>
      </div>
    </div>
  </div>

</div>

{% endblock %}